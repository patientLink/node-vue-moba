(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c504"],{f367:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"about"},[l("h1",[e._v(e._s(e.id?"编辑":"新建")+"英雄")]),l("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[l("el-tabs",{attrs:{type:"border-card",value:"basic"}},[l("el-tab-pane",{attrs:{label:"基础信息",name:"basic"}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),l("el-form-item",{attrs:{label:"头像"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"avatar",t.url)}}},[e.model.avatar?l("img",{staticClass:"avatar",attrs:{src:e.model.avatar}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("el-form-item",{attrs:{label:"英雄背景图"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"banner",t.url)}}},[e.model.banner?l("img",{staticClass:"avatar",attrs:{src:e.model.banner}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("el-form-item",{attrs:{label:"称号"}},[l("el-input",{model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),l("el-form-item",{attrs:{label:"类型"}},[l("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),l("el-form-item",{attrs:{label:"难度"}},[l("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:10,"show-score":""},model:{value:e.model.scores.difficult,callback:function(t){e.$set(e.model.scores,"difficult",t)},expression:"model.scores.difficult"}})],1),l("el-form-item",{attrs:{label:"技能"}},[l("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:10,"show-score":""},model:{value:e.model.scores.skill,callback:function(t){e.$set(e.model.scores,"skill",t)},expression:"model.scores.skill"}})],1),l("el-form-item",{attrs:{label:"攻击"}},[l("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:10,"show-score":""},model:{value:e.model.scores.attack,callback:function(t){e.$set(e.model.scores,"attack",t)},expression:"model.scores.attack"}})],1),l("el-form-item",{attrs:{label:"生存"}},[l("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:10,"show-score":""},model:{value:e.model.scores.survive,callback:function(t){e.$set(e.model.scores,"survive",t)},expression:"model.scores.survive"}})],1),l("el-form-item",{attrs:{label:"推荐加点"}},[l("el-row",[l("el-col",[l("span",[e._v("主升技能")])]),l("el-col",[l("el-select",{attrs:{"value-key":"name",placeholder:"主升技能",filterable:""},model:{value:e.model.recommendSkills.main,callback:function(t){e.$set(e.model.recommendSkills,"main",t)},expression:"model.recommendSkills.main"}},e._l(e.model.skills,(function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e}})})),1)],1)],1),l("el-row",[l("el-col",[l("span",[e._v("副升技能")])]),l("el-col",[l("el-select",{attrs:{"value-key":"name",placeholder:"副升技能",filterable:""},model:{value:e.model.recommendSkills.vice,callback:function(t){e.$set(e.model.recommendSkills,"vice",t)},expression:"model.recommendSkills.vice"}},e._l(e.model.skills,(function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e}})})),1)],1)],1),l("el-row",[l("el-col",[l("span",[e._v("召唤师技能")])]),l("el-col",[l("el-select",{attrs:{multiple:"",filterable:""},model:{value:e.model.recommendSkills.common,callback:function(t){e.$set(e.model.recommendSkills,"common",t)},expression:"model.recommendSkills.common"}},e._l(e.commonSkills,(function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1)],1)],1),l("el-form-item",{attrs:{label:"顺风出装"}},[l("el-select",{attrs:{multiple:"",filterable:""},model:{value:e.model.items1,callback:function(t){e.$set(e.model,"items1",t)},expression:"model.items1"}},e._l(e.items,(function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),l("el-form-item",{attrs:{label:"逆风出装"}},[l("el-select",{attrs:{multiple:"",filterable:""},model:{value:e.model.items2,callback:function(t){e.$set(e.model,"items2",t)},expression:"model.items2"}},e._l(e.items,(function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),l("el-form-item",{attrs:{label:"使用技巧"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.model.usageTips,callback:function(t){e.$set(e.model,"usageTips",t)},expression:"model.usageTips"}})],1),l("el-form-item",{attrs:{label:"对抗技巧"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.model.battleTips,callback:function(t){e.$set(e.model,"battleTips",t)},expression:"model.battleTips"}})],1),l("el-form-item",{attrs:{label:"团战思路"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.model.teamTips,callback:function(t){e.$set(e.model,"teamTips",t)},expression:"model.teamTips"}})],1)],1),l("el-tab-pane",{attrs:{label:"技能",name:"skills"}},[l("el-button",{attrs:{size:"small"},on:{click:function(t){return e.model.skills.push({})}}},[l("i",{staticClass:"el-icon-plus"}),e._v(" 添加技能")]),l("el-row",e._l(e.model.skills,(function(t,a){return l("el-col",{key:a,attrs:{xl:6,lg:8,md:12}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:t.name,callback:function(l){e.$set(t,"name",l)},expression:"item.name"}})],1),l("el-form-item",{attrs:{label:"冷却值"}},[l("el-input",{model:{value:t.delay,callback:function(l){e.$set(t,"delay",l)},expression:"item.delay"}})],1),l("el-form-item",{attrs:{label:"消耗"}},[l("el-input",{model:{value:t.cost,callback:function(l){e.$set(t,"cost",l)},expression:"item.cost"}})],1),l("el-form-item",{attrs:{label:"图标"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":function(l){return e.$set(t,"icon",l.url)}}},[t.icon?l("img",{staticClass:"avatar",attrs:{src:t.icon}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("el-form-item",{attrs:{label:"描述"}},[l("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(l){e.$set(t,"description",l)},expression:"item.description"}})],1),l("el-form-item",{attrs:{label:"小提示"}},[l("el-input",{attrs:{type:"textarea"},model:{value:t.tips,callback:function(l){e.$set(t,"tips",l)},expression:"item.tips"}})],1),l("el-form-item",[l("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.skills.splice(a,1)}}},[e._v(" 删除 ")])],1)],1)})),1)],1),l("el-tab-pane",{attrs:{label:"英雄关系",name:"partners"}},[l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{xl:2,lg:4,md:6,sm:8}},[l("el-select",{attrs:{size:"small",placeholder:"选择人物关系"},model:{value:e.partnerName,callback:function(t){e.partnerName=t},expression:"partnerName"}},[l("el-option",{attrs:{label:"最佳搭档",value:"partners"}}),l("el-option",{attrs:{label:"被谁克制",value:"partners1"}}),l("el-option",{attrs:{label:"克制谁",value:"partners2"}})],1)],1),l("el-col",{attrs:{xl:2,lg:4,md:6,sm:8}},[l("el-button",{attrs:{size:"small"},on:{click:function(t){return e.model[e.partnerName].push({})}}},[l("i",{staticClass:"el-icon-plus"}),e._v(" 添加关系")])],1)],1),l("br"),l("el-row",e._l(e.model[e.partnerName],(function(t,a){return l("el-col",{key:a,attrs:{xl:6,lg:8,md:12}},[l("el-form-item",{attrs:{label:"英雄"}},[l("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(l){e.$set(t,"hero",l)},expression:"item.hero"}},e._l(e.heroes,(function(e){return l("el-option",{key:e._id,attrs:{value:e._id,label:e.name}})})),1)],1),l("el-form-item",{attrs:{label:"描述"}},[l("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(l){e.$set(t,"description",l)},expression:"item.description"}})],1),l("el-form-item",[l("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.partners.splice(a,1)}}},[e._v(" 删除 ")])],1)],1)})),1)],1)],1),l("el-form-item",{staticStyle:{"margin-top":"1rem"}},[l("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},s=[],r=(l("96cf"),l("1da1")),o={props:{id:{}},data:function(){return{partnerName:"partners",categories:[],items:[],heroes:[],commonSkills:[],model:{name:"",title:"",avatar:"",scores:{difficult:0,skill:0,attack:0,survive:0},recommendSkills:{main:{},vice:{},common:[]},items1:[],items2:[],usageTips:"",battleTips:"",teamTips:"",skills:[],partners:[]}}},computed:{},methods:{save:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=6;break}return t.next=3,e.$http.put("rest/heroes/".concat(e.id),e.model);case 3:l=t.sent,t.next=9;break;case 6:return t.next=8,e.$http.post("rest/heroes",e.model);case 8:l=t.sent;case 9:console.log(l),e.$message({type:"success",message:"保存成功"});case 11:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heroes/".concat(e.id));case 2:l=t.sent,e.model=Object.assign({},e.model,l.data);case 4:case"end":return t.stop()}}),t)})))()},fetchCategories:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/categories");case 2:l=t.sent,e.categories=l.data;case 4:case"end":return t.stop()}}),t)})))()},fetchItems:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/items");case 2:l=t.sent,e.items=l.data;case 4:case"end":return t.stop()}}),t)})))()},fetchHeroes:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heroes");case 2:l=t.sent,e.heroes=l.data;case 4:case"end":return t.stop()}}),t)})))()},fetchCommonSkills:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/common_skills");case 2:l=t.sent,e.commonSkills=l.data;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchCategories(),this.fetchItems(),this.fetchHeroes(),this.fetchCommonSkills(),this.id&&this.fetch()}},n=o,i=l("2877"),c=Object(i["a"])(n,a,s,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d22c504.f7c4b6f5.js.map